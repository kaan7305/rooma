{
	"info": {
		"_postman_id": "rooma-api-v1",
		"name": "ROOMA API - Complete Collection",
		"description": "Complete API collection for ROOMA student housing platform with all 50 endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3001/api",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		},
		{
			"key": "propertyId",
			"value": "",
			"type": "string"
		},
		{
			"key": "bookingId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "1. Authentication",
			"item": [
				{
					"name": "Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"    pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
									"    pm.collectionVariables.set('userId', response.data.user.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"phone\": \"+14155551234\",\n  \"date_of_birth\": \"2000-01-15\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "register"]
						}
					}
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"    pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
									"    pm.collectionVariables.set('userId', response.data.user.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@rooma.com\",\n  \"password\": \"Password123!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "login"]
						}
					}
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/auth/refresh",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "refresh"]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/auth/logout",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "logout"]
						}
					}
				}
			]
		},
		{
			"name": "2. Users",
			"item": [
				{
					"name": "Get My Profile",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/me",
							"host": ["{{baseUrl}}"],
							"path": ["users", "me"]
						}
					}
				},
				{
					"name": "Update Profile",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"John\",\n  \"last_name\": \"Smith\",\n  \"bio\": \"Student at Harvard. Looking for clean, quiet housing.\",\n  \"phone\": \"+14155559999\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/users/me",
							"host": ["{{baseUrl}}"],
							"path": ["users", "me"]
						}
					}
				},
				{
					"name": "Get User By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/:userId",
							"host": ["{{baseUrl}}"],
							"path": ["users", ":userId"],
							"variable": [
								{
									"key": "userId",
									"value": "{{userId}}"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "3. Properties",
			"item": [
				{
					"name": "Create Property",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('propertyId', response.data.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Cozy Studio Near Campus\",\n  \"description\": \"Perfect for students! Walking distance to university.\",\n  \"property_type\": \"ENTIRE_PLACE\",\n  \"street_address\": \"123 Main Street\",\n  \"city\": \"Cambridge\",\n  \"state\": \"MA\",\n  \"postal_code\": \"02138\",\n  \"country\": \"United States\",\n  \"latitude\": 42.3736,\n  \"longitude\": -71.1097,\n  \"bedrooms\": 1,\n  \"bathrooms\": 1,\n  \"max_guests\": 2,\n  \"square_feet\": 500,\n  \"monthly_price_cents\": 200000,\n  \"cleaning_fee_cents\": 10000,\n  \"security_deposit_cents\": 200000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/properties",
							"host": ["{{baseUrl}}"],
							"path": ["properties"]
						}
					}
				},
				{
					"name": "Get All Properties",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/properties?page=1&limit=20",
							"host": ["{{baseUrl}}"],
							"path": ["properties"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "city",
									"value": "Cambridge",
									"disabled": true
								},
								{
									"key": "min_price",
									"value": "100000",
									"disabled": true
								},
								{
									"key": "max_price",
									"value": "300000",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Get Property By ID",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/properties/:propertyId",
							"host": ["{{baseUrl}}"],
							"path": ["properties", ":propertyId"],
							"variable": [
								{
									"key": "propertyId",
									"value": "{{propertyId}}"
								}
							]
						}
					}
				},
				{
					"name": "Update Property",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Updated Cozy Studio\",\n  \"monthly_price_cents\": 220000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/properties/:propertyId",
							"host": ["{{baseUrl}}"],
							"path": ["properties", ":propertyId"],
							"variable": [
								{
									"key": "propertyId",
									"value": "{{propertyId}}"
								}
							]
						}
					}
				},
				{
					"name": "Delete Property",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/properties/:propertyId",
							"host": ["{{baseUrl}}"],
							"path": ["properties", ":propertyId"],
							"variable": [
								{
									"key": "propertyId",
									"value": "{{propertyId}}"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "4. Bookings",
			"item": [
				{
					"name": "Create Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('bookingId', response.data.id);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"property_id\": \"{{propertyId}}\",\n  \"check_in_date\": \"2025-09-01\",\n  \"check_out_date\": \"2025-12-31\",\n  \"guests\": 1\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": ["{{baseUrl}}"],
							"path": ["bookings"]
						}
					}
				},
				{
					"name": "Get My Bookings",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings?role=guest",
							"host": ["{{baseUrl}}"],
							"path": ["bookings"],
							"query": [
								{
									"key": "role",
									"value": "guest"
								}
							]
						}
					}
				},
				{
					"name": "Get Booking By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/:bookingId",
							"host": ["{{baseUrl}}"],
							"path": ["bookings", ":bookingId"],
							"variable": [
								{
									"key": "bookingId",
									"value": "{{bookingId}}"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "5. Universities",
			"item": [
				{
					"name": "Search Universities",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/universities?q=Harvard&page=1&limit=20",
							"host": ["{{baseUrl}}"],
							"path": ["universities"],
							"query": [
								{
									"key": "q",
									"value": "Harvard"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								}
							]
						}
					}
				},
				{
					"name": "Get University By ID",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/universities/:universityId",
							"host": ["{{baseUrl}}"],
							"path": ["universities", ":universityId"],
							"variable": [
								{
									"key": "universityId",
									"value": ""
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "6. Messages",
			"item": [
				{
					"name": "Create Conversation",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"participant_id\": \"user-id-here\",\n  \"property_id\": \"{{propertyId}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/conversations",
							"host": ["{{baseUrl}}"],
							"path": ["conversations"]
						}
					}
				},
				{
					"name": "Get My Conversations",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/conversations",
							"host": ["{{baseUrl}}"],
							"path": ["conversations"]
						}
					}
				},
				{
					"name": "Send Message",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message_text\": \"Hello! Is this property still available?\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/conversations/:conversationId/messages",
							"host": ["{{baseUrl}}"],
							"path": ["conversations", ":conversationId", "messages"],
							"variable": [
								{
									"key": "conversationId",
									"value": ""
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "7. Payments",
			"item": [
				{
					"name": "Create Payment Intent",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"booking_id\": \"{{bookingId}}\",\n  \"payment_method\": \"card\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/payments/create-intent",
							"host": ["{{baseUrl}}"],
							"path": ["payments", "create-intent"]
						}
					}
				},
				{
					"name": "Get Payment Details",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/payments/:bookingId",
							"host": ["{{baseUrl}}"],
							"path": ["payments", ":bookingId"],
							"variable": [
								{
									"key": "bookingId",
									"value": "{{bookingId}}"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "8. Wishlists",
			"item": [
				{
					"name": "Create Wishlist",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"My Favorites\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/wishlists",
							"host": ["{{baseUrl}}"],
							"path": ["wishlists"]
						}
					}
				},
				{
					"name": "Get My Wishlists",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/wishlists",
							"host": ["{{baseUrl}}"],
							"path": ["wishlists"]
						}
					}
				},
				{
					"name": "Add to Wishlist",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"property_id\": \"{{propertyId}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/wishlists/:wishlistId/items",
							"host": ["{{baseUrl}}"],
							"path": ["wishlists", ":wishlistId", "items"],
							"variable": [
								{
									"key": "wishlistId",
									"value": ""
								}
							]
						}
					}
				}
			]
		}
	]
}
